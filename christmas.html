```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éŸ³ä¹åœ£è¯æ ‘ - è€ç‹ç¥ä½ åœ£è¯èŠ‚å¿«ä¹ï¼</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: #000;
            color: white;
            overflow: hidden;
            position: relative;
        }
        
        /* ç¥ç¦è¯­å åŠ å±‚ */
        .greeting-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1000;
            pointer-events: none;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
        }
        
        .main-greeting {
            font-size: 4.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            text-shadow: 
                0 0 20px #ff0000,
                0 0 40px #ff0000,
                0 0 60px #ff0000,
                0 0 80px #ff0000;
            animation: greetingPulse 3s infinite alternate;
            background: linear-gradient(45deg, #ff0000, #ff8800, #ffff00, #00ff00, #0088ff, #8800ff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            background-size: 400% 400%;
            animation: gradientShift 5s ease infinite;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .sub-greeting {
            font-size: 2rem;
            color: #00ffff;
            text-shadow: 0 0 15px #00ffff;
            margin-bottom: 30px;
            animation: floatText 4s infinite ease-in-out;
        }
        
        .message {
            font-size: 1.5rem;
            color: #ffff00;
            max-width: 800px;
            line-height: 1.6;
            text-shadow: 0 0 10px #ffff00;
            background: rgba(0, 0, 0, 0.6);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: messageFade 8s infinite;
        }
        
        .special-name {
            color: #ff00ff;
            font-weight: bold;
            text-shadow: 0 0 15px #ff00ff;
            animation: nameGlow 2s infinite alternate;
        }
        
        @keyframes nameGlow {
            0% { text-shadow: 0 0 10px #ff00ff; }
            100% { text-shadow: 0 0 30px #ff00ff, 0 0 50px #ff00ff; }
        }
        
        @keyframes greetingPulse {
            0% { transform: scale(1); opacity: 0.8; }
            100% { transform: scale(1.1); opacity: 1; }
        }
        
        @keyframes floatText {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes messageFade {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }
        
        /* æ§åˆ¶é¢æ¿ */
        .control-panel {
            position: fixed;
            bottom: 20px;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: center;
            gap: 15px;
            z-index: 1001;
            pointer-events: auto;
        }
        
        .music-btn {
            background: linear-gradient(45deg, #ff0000, #ff8800);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.5);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .music-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 0 30px rgba(255, 0, 0, 0.8);
        }
        
        .music-btn:active {
            transform: translateY(-1px);
        }
        
        .btn-group {
            display: flex;
            gap: 10px;
        }
        
        /* åŠ è½½ç•Œé¢ */
        #overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #000428, #004e92);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 1s;
        }
        
        .loading-text {
            font-size: 2.5rem;
            color: #00ffff;
            text-shadow: 0 0 20px #00ffff;
            margin-bottom: 30px;
            animation: loadingPulse 1.5s infinite alternate;
        }
        
        @keyframes loadingPulse {
            0% { opacity: 0.5; transform: scale(1); }
            100% { opacity: 1; transform: scale(1.1); }
        }
        
        .btn {
            background: linear-gradient(45deg, #00ff00, #00ff88);
            color: #000;
            border: none;
            padding: 12px 30px;
            margin: 10px;
            border-radius: 25px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.5);
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 0 30px rgba(0, 255, 0, 0.8);
        }
        
        .upload-btn {
            background: linear-gradient(45deg, #0088ff, #8800ff);
            color: white;
        }
        
        .text-loading {
            font-size: 2rem;
            color: #ffff00;
            text-shadow: 0 0 20px #ffff00;
            animation: loadingSpin 2s linear infinite;
        }
        
        @keyframes loadingSpin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* éŸ³ä¹ä¿¡æ¯ */
        .music-info {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            z-index: 1001;
            max-width: 300px;
            display: none;
        }
        
        .music-title {
            color: #00ffff;
            font-size: 1.2rem;
            margin-bottom: 5px;
        }
        
        .music-description {
            color: #cccccc;
            font-size: 0.9rem;
            line-height: 1.4;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .main-greeting {
                font-size: 3rem;
            }
            
            .sub-greeting {
                font-size: 1.5rem;
            }
            
            .message {
                font-size: 1.2rem;
                padding: 15px;
            }
            
            .control-panel {
                flex-direction: column;
                align-items: center;
            }
            
            .btn-group {
                flex-wrap: wrap;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- ç¥ç¦è¯­å±‚ -->
    <div class="greeting-overlay">
        <div class="main-greeting">
            <span class="special-name">è€ç‹</span>ç¥ä½ åœ£è¯èŠ‚å¿«ä¹ï¼
        </div>
        <div class="sub-greeting">ğŸ„ æ¥è‡ªéŸ³ä¹åœ£è¯æ ‘çš„ç‰¹åˆ«ç¥ç¦ ğŸ„</div>
        <div class="message">
            åœ¨è¿™ç¾å¦™çš„åœ£è¯éŸ³ä¹ä¸­ï¼Œè®©èŠ‚æ—¥çš„æ—‹å¾‹ä¼´éšæˆ‘ä»¬çš„ç¥ç¦ã€‚<br>
            æ„¿ä½ çš„åœ£è¯èŠ‚å……æ»¡æ¬¢ä¹ã€çˆ±ä¸æ¸©æš–ï¼Œæ–°å¹´æ›´åŠ ç¿çƒ‚è¾‰ç…Œï¼
        </div>
    </div>
    
    <!-- æ§åˆ¶é¢æ¿ -->
    <div class="control-panel">
        <button class="music-btn" onclick="toggleMusic()">
            <span id="music-icon">â–¶ï¸</span> æ’­æ”¾/æš‚åœ
        </button>
        <div class="btn-group">
            <button class="music-btn" onclick="changeMusic(0)">ğŸµ é›ªèŠ±é£˜è½</button>
            <button class="music-btn" onclick="changeMusic(1)">ğŸµ åœ£è¯å¿«ä¹</button>
            <button class="music-btn" onclick="changeMusic(2)">ğŸµ é“ƒå„¿å“å®å½“</button>
        </div>
    </div>
    
    <!-- éŸ³ä¹ä¿¡æ¯æ˜¾ç¤º -->
    <div class="music-info" id="music-info">
        <div class="music-title" id="music-title">æ­£åœ¨æ’­æ”¾ï¼šåœ£è¯éŸ³ä¹</div>
        <div class="music-description" id="music-description">éŸ³ä¹æ•°æ®å¯è§†åŒ–æ•ˆæœ</div>
    </div>
    
    <!-- åŠ è½½ç•Œé¢ -->
    <div id="overlay">
        <div class="loading-text">ğŸ„ éŸ³ä¹åœ£è¯æ ‘ ğŸ„</div>
        <div style="text-align: center; margin-bottom: 30px; color: #ffff00;">
            <h2 style="margin-bottom: 10px;">è€ç‹ç¥ä½ åœ£è¯èŠ‚å¿«ä¹ï¼</h2>
            <p style="font-size: 1.2rem;">é€‰æ‹©ä¸€ä¸ªéŸ³ä¹å¼€å§‹ç¾å¦™çš„åœ£è¯æ—…ç¨‹</p>
        </div>
        
        <div style="margin-bottom: 20px;">
            <button class="btn" onclick="loadAudio(0)">â„ï¸ é›ªèŠ±é£˜è½</button>
            <button class="btn" onclick="loadAudio(1)">ğŸ… åœ£è¯å¿«ä¹</button>
            <button class="btn" onclick="loadAudio(2)">ğŸ”” é“ƒå„¿å“å®å½“</button>
            <button class="btn" onclick="loadAudio(3)">ğŸ„ æ‘‡æ‘†åœ£è¯</button>
        </div>
        
        <label style="display: inline-block;">
            <input type="file" accept="audio/*" style="display: none;" onchange="uploadAudio(event)">
            <div class="btn upload-btn">ğŸ“ ä¸Šä¼ æœ¬åœ°éŸ³ä¹</div>
        </label>
        
        <div style="margin-top: 40px; color: #bbbbbb; max-width: 600px; text-align: center;">
            <p>ğŸµ éŸ³ä¹å¯è§†åŒ–æ•ˆæœä¼šéšéŸ³é¢‘èŠ‚å¥å˜åŒ–</p>
            <p>âœ¨ åœ£è¯æ ‘ä¼šéšç€éŸ³ä¹è·³åŠ¨å‘å…‰</p>
            <p>ğŸ„ ä¸“ä¸ºè€ç‹å®šåˆ¶çš„åœ£è¯éŸ³ä¹ä½“éªŒ</p>
        </div>
    </div>

    <!-- å¼•å…¥Three.jså’Œç›¸å…³åº“ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/EffectComposer.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/RenderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/UnrealBloomPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <script>
        // éŸ³ä¹ç›¸å…³ä¿¡æ¯
        const musicInfo = [
            {
                title: "é›ªèŠ±é£˜è½",
                description: "è½»æŸ”çš„é’¢ç´æ—‹å¾‹ï¼Œå¦‚åŒé›ªèŠ±èˆ¬é£˜è½ï¼Œå¸¦æ¥å®é™çš„åœ£è¯æ°›å›´ã€‚"
            },
            {
                title: "åœ£è¯å¿«ä¹",
                description: "æ¬¢å¿«çš„åœ£è¯æ­Œæ›²ï¼Œå……æ»¡èŠ‚æ—¥æ°”æ°›ï¼Œè®©äººå¿ä¸ä½è·Ÿç€å“¼å”±ã€‚"
            },
            {
                title: "é“ƒå„¿å“å®å½“",
                description: "ç»å…¸çš„åœ£è¯æ—‹å¾‹ï¼Œé“ƒé“›å£°æ¸…è„†æ‚¦è€³ï¼Œå”¤é†’ç«¥å¹´çš„åœ£è¯è®°å¿†ã€‚"
            },
            {
                title: "æ‘‡æ‘†åœ£è¯",
                description: "è½»å¿«çš„çˆµå£«é£æ ¼åœ£è¯éŸ³ä¹ï¼Œé€‚åˆä¼´ç€èŠ‚å¥è½»è½»æ‘‡æ‘†ã€‚"
            }
        ];

        const { PI, sin, cos } = Math;
        const TAU = 2 * PI;

        const map = (value, sMin, sMax, dMin, dMax) => {
            return dMin + ((value - sMin) / (sMax - sMin)) * (dMax - dMin);
        };
        
        const range = (n, m = 0) =>
            Array(n)
            .fill(m)
            .map((i, j) => i + j);

        const rand = (max, min = 0) => min + Math.random() * (max - min);
        const randInt = (max, min = 0) => Math.floor(min + Math.random() * (max - min));
        const randChoise = (arr) => arr[randInt(arr.length)];
        const polar = (ang, r = 1) => [r * cos(ang), r * sin(ang)];

        let scene, camera, renderer, analyser;
        let step = 0;
        const uniforms = {
            time: { type: "f", value: 0.0 },
            step: { type: "f", value: 0.0 },
        };
        const params = {
            exposure: 1,
            bloomStrength: 0.9,
            bloomThreshold: 0,
            bloomRadius: 0.5,
        };
        let composer;
        let currentMusicIndex = 0;
        let isPlaying = false;

        const fftSize = 2048;
        const totalPoints = 4000;

        const listener = new THREE.AudioListener();
        const audio = new THREE.Audio(listener);

        function init() {
            const overlay = document.getElementById("overlay");
            overlay.style.opacity = "0";
            setTimeout(() => {
                overlay.style.display = "none";
            }, 1000);

            // æ˜¾ç¤ºéŸ³ä¹ä¿¡æ¯
            document.getElementById('music-info').style.display = 'block';
            updateMusicInfo(currentMusicIndex);

            scene = new THREE.Scene();
            renderer = new THREE.WebGLRenderer({ 
                antialias: true,
                alpha: true 
            });
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            camera = new THREE.PerspectiveCamera(
                60,
                window.innerWidth / window.innerHeight,
                1,
                1000
            );
            camera.position.set(-0.094, -2.56, 24.42);
            camera.rotation.set(0.104, -0.004, 0.0004);

            const format = renderer.capabilities.isWebGL2 ?
                THREE.RedFormat :
                THREE.LuminanceFormat;

            uniforms.tAudioData = {
                value: new THREE.DataTexture(analyser.data, fftSize / 2, 1, format),
            };

            // æ·»åŠ åœ£è¯æ ‘
            addTree(scene, uniforms, totalPoints, [0, -5, 0]);
            
            // æ·»åŠ æ›´å¤šå°æ ‘
            range(6).map((i) => {
                const x = Math.cos(i * TAU / 6) * 15;
                const z = Math.sin(i * TAU / 6) * 15;
                addSmallTree(scene, uniforms, totalPoints / 2, [x, -5, z]);
            });

            // æ·»åŠ é›ªèŠ±
            addSnow(scene, uniforms);
            
            // æ·»åŠ æ˜Ÿæ˜ŸèƒŒæ™¯
            addStars(scene);

            const renderScene = new THREE.RenderPass(scene, camera);

            const bloomPass = new THREE.UnrealBloomPass(
                new THREE.Vector2(window.innerWidth, window.innerHeight),
                1.5,
                0.4,
                0.85
            );
            bloomPass.threshold = params.bloomThreshold;
            bloomPass.strength = params.bloomStrength;
            bloomPass.radius = params.bloomRadius;

            composer = new THREE.EffectComposer(renderer);
            composer.addPass(renderScene);
            composer.addPass(bloomPass);

            // æ·»åŠ è½¨é“æ§åˆ¶
            const controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;

            animate();
            
            // è‡ªåŠ¨æ—‹è½¬ç›¸æœº
            let autoRotate = true;
            setInterval(() => {
                if (autoRotate) {
                    camera.position.x = Math.sin(Date.now() * 0.0005) * 20;
                    camera.position.z = Math.cos(Date.now() * 0.0005) * 20;
                    camera.lookAt(0, 0, 0);
                }
            }, 16);
            
            // ç‚¹å‡»æ—¶æš‚åœè‡ªåŠ¨æ—‹è½¬
            renderer.domElement.addEventListener('click', () => {
                autoRotate = false;
                setTimeout(() => {
                    autoRotate = true;
                }, 5000);
            });
        }

        function addTree(scene, uniforms, totalPoints, treePosition) {
            const vertexShader = `
                attribute float mIndex;
                varying vec3 vColor;
                varying float opacity;
                uniform sampler2D tAudioData;
                uniform float time;
                uniform float step;
                
                float norm(float value, float min, float max){
                    return (value - min) / (max - min);
                }
                
                void main() {
                    float audioValue = texture2D(tAudioData, vec2(norm(mIndex, 0.0, ${totalPoints.toFixed(1)}), 0.0)).r;
                    
                    // åˆ›å»ºåœ£è¯æ ‘å½¢çŠ¶
                    float height = position.y;
                    float radius = (1.0 - height) * 2.0;
                    float angle = position.x * 3.14159 * 2.0;
                    
                    vec3 pos = position;
                    pos.x = radius * cos(angle + time * 0.5) * (1.0 + audioValue * 0.5);
                    pos.z = radius * sin(angle + time * 0.5) * (1.0 + audioValue * 0.5);
                    pos.y = height * 2.0;
                    
                    // æ ¹æ®éŸ³é¢‘æ•°æ®å¢åŠ è·³åŠ¨æ•ˆæœ
                    pos.y += audioValue * 1.5;
                    
                    // é¢œè‰²æ ¹æ®ä½ç½®å’ŒéŸ³é¢‘å˜åŒ–
                    vColor = vec3(
                        0.2 + height * 0.8 + audioValue * 0.3,
                        0.8 - height * 0.3 + audioValue * 0.2,
                        0.2 + audioValue * 0.5
                    );
                    
                    opacity = 0.7 + audioValue * 0.3;
                    
                    gl_Position = projectionMatrix * modelViewMatrix * vec4(pos + vec3(${treePosition[0]}, ${treePosition[1]}, ${treePosition[2]}), 1.0);
                    gl_PointSize = 3.0 + audioValue * 10.0;
                }
            `;
            
            const fragmentShader = `
                varying vec3 vColor;
                varying float opacity;
                
                void main() {
                    float dist = distance(gl_PointCoord, vec2(0.5, 0.5));
                    if (dist > 0.5) discard;
                    
                    float alpha = (1.0 - dist * 2.0) * opacity;
                    gl_FragColor = vec4(vColor, alpha);
                }
            `;

            const positions = [];
            const indices = [];
            
            for (let i = 0; i < totalPoints; i++) {
                const height = Math.random();
                const angle = Math.random() * TAU;
                const radius = (1 - height) * Math.random() * 0.8;
                
                positions.push(
                    radius * Math.cos(angle),
                    height,
                    radius * Math.sin(angle)
                );
                indices.push(i);
            }
            
            const geometry = new THREE.BufferGeometry();
            geometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));
            geometry.setAttribute('mIndex', new THREE.Float32BufferAttribute(indices, 1));
            
            const material = new THREE.ShaderMaterial({
                uniforms: Object.assign({}, uniforms, {
                    tAudioData: uniforms.tAudioData
                }),
                vertexShader: vertexShader,
                fragmentShader: fragmentShader,
                transparent: true,
                blending: THREE.AdditiveBlending
            });
            
            const tree = new THREE.Points(geometry, material);
            scene.add(tree);
            
            return tree;
        }

        function addSmallTree(scene, uniforms, totalPoints, position) {
            const tree = addTree(scene, uniforms, totalPoints, position);
            tree.scale.set(0.5, 0.5, 0.5);
            return tree;
        }

        function addSnow(scene, uniforms) {
            const snowGeometry = new THREE.BufferGeometry();
            const snowCount = 5000;
            const positions = [];
            
            for (let i = 0; i < snowCount; i++) {
                positions.push(
                    (Math.random() - 0.5) * 100,
                    Math.random() * 50 - 25,
                    (Math.random() - 0.5) * 100
                );
            }
            
            snowGeometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));
            
            const snowMaterial = new THREE.PointsMaterial({
                color: 0xffffff,
                size: 0.1,
                transparent: true,
                opacity: 0.8
            });
            
            const snow = new THREE.Points(snowGeometry, snowMaterial);
            scene.add(snow);
            
            // æ·»åŠ é›ªèŠ±åŠ¨ç”»
            function animateSnow() {
                const positions = snowGeometry.attributes.position.array;
                for (let i = 1; i < positions.length; i += 3) {
                    positions[i] -= 0.01;
                    if (positions[i] < -25) {
                        positions[i] = 25;
                    }
                }
                snowGeometry.attributes.position.needsUpdate = true;
                requestAnimationFrame(animateSnow);
            }
            animateSnow();
        }

        function addStars(scene) {
            const starGeometry = new THREE.BufferGeometry();
            const starCount = 1000;
            const positions = [];
            const colors = [];
            
            for (let i = 0; i < starCount; i++) {
                positions.push(
                    (Math.random() - 0.5) * 200,
                    (Math.random() - 0.5) * 200,
                    (Math.random() - 0.5) * 200
                );
                
                // éšæœºæ˜Ÿæ˜Ÿé¢œè‰²
                colors.push(
                    Math.random() * 0.5 + 0.5, // åçº¢
                    Math.random() * 0.5 + 0.5, // åç»¿
                    Math.random() * 0.5 + 0.5  // åè“
                );
            }
            
            starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));
            starGeometry.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3));
            
            const starMaterial = new THREE.PointsMaterial({
                size: 0.5,
                vertexColors: true,
                transparent: true,
                opacity: 0.8
            });
            
            const stars = new THREE.Points(starGeometry, starMaterial);
            scene.add(stars);
        }

        function animate(time) {
            if (analyser) {
                analyser.getFrequencyData();
                uniforms.tAudioData.value.needsUpdate = true;
            }
            step = (step + 1) % 1000;
            uniforms.time.value = time * 0.001;
            uniforms.step.value = step;
            composer.render();
            requestAnimationFrame(animate);
        }

        function loadAudio(i) {
            currentMusicIndex = i;
            document.getElementById("overlay").innerHTML =
                '<div class="text-loading">ğŸµ éŸ³ä¹åŠ è½½ä¸­...</div>';
            
            const files = [
                "https://files.freemusicarchive.org/storage-freemusicarchive-org/music/no_curator/Simon_Panrucker/Happy_Christmas_You_Guys/Simon_Panrucker_-_01_-_Snowflakes_Falling_Down.mp3",
                "https://files.freemusicarchive.org/storage-freemusicarchive-org/music/no_curator/Dott/This_Christmas/Dott_-_01_-_This_Christmas.mp3",
                "https://files.freemusicarchive.org/storage-freemusicarchive-org/music/ccCommunity/TRG_Banks/TRG_Banks_Christmas_Album/TRG_Banks_-_12_-_No_room_at_the_inn.mp3",
                "https://files.freemusicarchive.org/storage-freemusicarchive-org/music/ccCommunity/Mark_Smeby/En_attendant_Nol/Mark_Smeby_-_07_-_Jingle_Bell_Swing.mp3",
            ];
            const file = files[i];

            const loader = new THREE.AudioLoader();
            loader.load(file, function(buffer) {
                audio.setBuffer(buffer);
                audio.play();
                isPlaying = true;
                document.getElementById('music-icon').textContent = 'â¸ï¸';
                analyser = new THREE.AudioAnalyser(audio, fftSize);
                init();
            });
        }

        function uploadAudio(event) {
            currentMusicIndex = -1;
            document.getElementById("overlay").innerHTML =
                '<div class="text-loading">ğŸ“ ä¸Šä¼ å¤„ç†ä¸­...</div>';
            
            const files = event.target.files;
            const reader = new FileReader();

            reader.onload = function(file) {
                var arrayBuffer = file.target.result;

                listener.context.decodeAudioData(arrayBuffer, function(audioBuffer) {
                    audio.setBuffer(audioBuffer);
                    audio.play();
                    isPlaying = true;
                    document.getElementById('music-icon').textContent = 'â¸ï¸';
                    analyser = new THREE.AudioAnalyser(audio, fftSize);
                    
                    // æ›´æ–°éŸ³ä¹ä¿¡æ¯
                    document.getElementById('music-title').textContent = 'æ­£åœ¨æ’­æ”¾ï¼šä¸Šä¼ éŸ³ä¹';
                    document.getElementById('music-description').textContent = files[0].name;
                    
                    init();
                });
            };

            reader.readAsArrayBuffer(files[0]);
        }

        function toggleMusic() {
            if (!audio.buffer) return;
            
            if (isPlaying) {
                audio.pause();
                document.getElementById('music-icon').textContent = 'â–¶ï¸';
            } else {
                audio.play();
                document.getElementById('music-icon').textContent = 'â¸ï¸';
            }
            isPlaying = !isPlaying;
        }

        function changeMusic(index) {
            if (index === currentMusicIndex) {
                toggleMusic();
                return;
            }
            loadAudio(index);
        }

        function updateMusicInfo(index) {
            if (index >= 0 && index < musicInfo.length) {
                document.getElementById('music-title').textContent = 
                    `æ­£åœ¨æ’­æ”¾ï¼š${musicInfo[index].title}`;
                document.getElementById('music-description').textContent = 
                    musicInfo[index].description;
            }
        }

        // çª—å£å¤§å°è°ƒæ•´
        window.addEventListener('resize', function() {
            if (camera && renderer && composer) {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
                composer.setSize(window.innerWidth, window.innerHeight);
            }
        });

        // åˆå§‹æ˜¾ç¤ºç¥ç¦è¯­
        setTimeout(() => {
            document.querySelector('.greeting-overlay').style.opacity = '1';
        }, 2000);

        // ç¥ç¦è¯­è½®æ¢
        const messages = [
            "åœ¨è¿™ç¾å¦™çš„åœ£è¯éŸ³ä¹ä¸­ï¼Œè®©èŠ‚æ—¥çš„æ—‹å¾‹ä¼´éšæˆ‘ä»¬çš„ç¥ç¦ã€‚",
            "éŸ³ä¹åœ£è¯æ ‘ä¸ºä½ è·³åŠ¨ï¼Œæ„¿ä½ çš„åœ£è¯èŠ‚å……æ»¡æ¬¢ä¹ä¸æ¸©æš–ï¼",
            "éšç€éŸ³ç¬¦èµ·èˆï¼Œè®©åœ£è¯çš„é­”æ³•ç‚¹äº®ä½ çš„æ¯ä¸€ä¸ªç¬é—´ã€‚",
            "è€ç‹ï¼Œæ„¿è¿™ç‰¹åˆ«çš„éŸ³ä¹ç¥ç¦å¸¦ç»™ä½ æœ€ç¾å¥½çš„åœ£è¯å›å¿†ï¼",
            "åœ£è¯æ ‘çš„æ¯ä¸€é“å…‰ï¼Œéƒ½æ˜¯å¯¹ä½ æœ€çœŸæŒšçš„ç¥ç¦å’Œé—®å€™ã€‚"
        ];
        
        let messageIndex = 0;
        setInterval(() => {
            const messageEl = document.querySelector('.message');
            messageEl.style.opacity = '0';
            setTimeout(() => {
                messageIndex = (messageIndex + 1) % messages.length;
                messageEl.innerHTML = messages[messageIndex] + 
                    '<br>ğŸ„ <span class="special-name">è€ç‹</span>ç¥ä½ åœ£è¯èŠ‚å¿«ä¹ï¼ ğŸ„';
                messageEl.style.opacity = '1';
            }, 500);
        }, 8000);
    </script>
</body>
</html>
```
